
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

<title>百度</title>

</head>

<body>
<div class="proxyLoadTips">
	<div class="proxyLoadLogs"></div>
</div>

<script>
(function(){
function reclog(s,color){
	var now=new Date();
	var t=("0"+now.getHours()).substr(-2)
		+":"+("0"+now.getMinutes()).substr(-2)
		+":"+("0"+now.getSeconds()).substr(-2);
	var div=document.createElement("div");
	var elem=document.querySelector(".proxyLoadLogs");
	elem.appendChild(div);
	div.innerHTML='<div style="color:'+(!color?"":color==1?"red":color==2?"#0b1":color)+'">['+t+']'+s+'</div>';
};

var pageData=getData();
var path=pageData.path;
var html=pageData.html;

reclog('【RecordApp代理加载器】['+new Date(pageData.time||0).toLocaleString()+'缓存]:\
		<a href="https://xiangyuecn.gitee.io/recorder'+path+'">https://xiangyuecn.gitee.io/recorder'+path+'</a>\
		，GitHub很慢， ...emmmm...&#x1f914;，反正我是经常打不开 -&gt; gitee嗖的一下就打开了');
if(html){
	reclog("正在解析...",2);
}else{
	reclog("加载失败，请稍后刷新重试",1);
	return;
}


//gitee不提供CORS也是脑壳大
html=html.replace(/crossorigin/ig,"badeeCrossOrigin");


html=html.replace(/(?:DEF=")?\/\*=:=\*\/([\S\s]+?)\/\*<@([\S\s]+?)@>\*\/"?/g,"$2");
html=html.replace(/<!DOCTYPE.*?>/ig,"");
document.write(html);
var title=document.title=/>([^<>]+)<\/title>/.exec(html)[1];

reclog("【"+title+"】加载成功，已开始执行原始页面内容。",2);

var tipsElem=document.querySelector(".proxyLoadTips");
//tipsElem.style.display="none";

document.body.appendChild(tipsElem);
setTimeout(function(){ document.body.appendChild(tipsElem); },1000);
setTimeout(function(){ document.body.appendChild(tipsElem); },3000);



//大容量内容塞后面，以免辣眼睛
function getData(){
	return {"path":"/app-support-sample/QuickStart.html","time":1638778707757,"html":"\u003c!DOCTYPE HTML\u003e\r\n\u003chtml\u003e\r\n\u003chead\u003e\r\n\u003cmeta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /\u003e\r\n\u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"\u003e\r\n\u003clink rel=\"shortcut icon\" type=\"image/png\" href=\"https://cdn.jsdelivr.net/gh/xiangyuecn/Recorder@latest/assets/icon.png\"\u003e\r\n\r\n\u003ctitle\u003eRecordApp QuickStart: 快速入门\u003c/title\u003e\r\n\r\n\u003cscript\u003e\r\nvar Tips=\u0027你可以直接将 \u003ca target=\"_blank\" href=\"https://github.com/xiangyuecn/Recorder/blob/master/app-support-sample/QuickStart.html\"\u003e/app-support-sample/QuickStart.html\u003c/a\u003e 文件copy 到你的(https)网站中\uff0c然后将变量PageSet_RecordAppWxApi改成你自己的后端API地址\uff0c无需其他文件\uff0c就能正常开始测试了\uff1b相比 RecordApp (/app-support-sample/index.html) 这个大而全(杂乱)的demo\uff0c本文件更适合入门学习\u0027+unescape(\"%uD83D%uDE04\");\r\nconsole.log(Tips);\r\n\u003c/script\u003e\r\n\u003c/head\u003e\r\n\r\n\u003cbody\u003e\r\n\u003cscript\u003e\r\n/********将此处后端API地址改成你的地址即可开始测试**********/\r\n\r\n/**\u3010需修改\u3011请使用自己的网站后端一个接口地址去实现\uff1a微信JsSDK签名\u3001微信录音素材下载两个功能\uff1b不能用这个空的默认值\uff0c微信\u3010强制\u3011要\u3010绑安全域名\u3011\uff0c别的站用不了\u3002此接口地址是用在ios-weixin-config.js中的\uff0c如果你要调整请求的参数\u3001或者响应结果格式\u3001或用两个接口地址\uff0c需要修改此js中对应的ajax调用\u3002\r\n\u3010微信文档\u3011后端签名接口参考\uff1a微信JsSDK wx.config需使用到后端接口进行签名\uff0c文档: https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html 阅读\uff1a通过config接口注入权限验证配置\u3001附录1-JS-SDK使用权限签名算法\u3002\r\n\u3010微信文档\u3011后端素材下载接口参考: https://mp.weixin.qq.com/wiki?t=resource/res_main\u0026id=mp1444738727\r\n**/\r\nvar PageSet_RecordAppWxApi=\"\";\r\n/*这个api接口\uff1a\r\n\t会实现两个功能\uff0cajax POST请求参数如下(都是两个参数\uff0c完整细节看下面ajax调用):\r\n\t\t功能一\u3001action=\"sign\" //JsSDK签名\r\n\t\t\t\turl=\"https://x.com/page\" //当前页面url地址,需要对这个地址进行签名\r\n\t\t功能二\u3001action=\"wxdown\" //素材下载\r\n\t\t\t\tmediaID=\"abcd\" //需下载的素材ID\r\n\t响应内容(JSON Object):\r\n\t\t{\r\n\t\t\tc:0\t\t//code\uff0c0\uff1a正常\uff0c其他\uff1a错误\r\n\t\t\t,m:\"\"\t//errMsg code!=0时的错误描述\r\n\t\t\t,v:{}\t//返回结果value\uff0c为JSON Object\r\n\t\t\t\t\t//sign时:v={appid:\"公众号appid\", timestamp:1577836800, noncestr:\"随机字符串\", signature:\"签名值\"} 就是返回wx.config需要的签名相关参数\r\n\t\t\t\t\t//wxdown时:v={mime:\"audio/amr\", data:\"base64文本\"} 就是返回素材下载的音频文件base64编码数据\r\n\t\t}*/\r\n\r\n\r\n/**\u3010需修改\u3011请使用自己的js文件目录\uff0c不要用github的不稳定\u3002RecordApp会自动从这个目录内进行加载相关的实现文件\u3001Recorder核心\u3001编码引擎\uff0c会自动默认加载哪些文件\uff0c请查阅app.js内所有Platform的paths配置**/\r\nvar PageSet_RecordAppBaseFolder = \"https://cdn.jsdelivr.net/gh/xiangyuecn/Recorder@latest/dist/\";//使用dist目录内的文件小2/3\r\n\u003c/script\u003e\r\n\r\n\u003c!--\u30101.1\u3011加载独立配置文件\uff0c免得修改app.js--\u003e\r\n\u003c!-- 可选开启ios weixin支持的相关配置 --\u003e\r\n\u003cscript src=\"https://cdn.jsdelivr.net/gh/xiangyuecn/Recorder@latest/app-support-sample/ios-weixin-config.js\"\u003e\u003c/script\u003e\r\n\u003c!-- 可选开启native支持的相关配置 --\u003e\r\n\u003cscript src=\"https://cdn.jsdelivr.net/gh/xiangyuecn/Recorder@latest/app-support-sample/native-config.js\"\u003e\u003c/script\u003e\r\n\r\n\r\n\u003c!--\r\n\u30101.2\u3011引入框架文件\uff0capp.js会自动加载实现文件\u3001Recorder核心\u3001编码引擎\uff0c需确保PageSet_RecordAppBaseFolder目录正确\r\n注意自己使用时应当自己把源码clone下来\uff0c然后通过src=\"/src/app-support/app.js\"引入\uff0c这里为了方便copy文件测试起见\uff0c使用了JsDelivr CDN\u3002\r\n--\u003e\r\n\u003cscript src=\"https://cdn.jsdelivr.net/gh/xiangyuecn/Recorder@latest/dist/app-support/app.js\"\u003e\u003c/script\u003e\r\n\r\n\r\n\u003cscript\u003e\r\n(function(){\r\n//注册可选扩展库\r\nvar paths=RecordApp.Platforms.Default.Config.paths;\r\npaths.push({\r\n\turl:PageSet_RecordAppBaseFolder+\"extensions/waveview.js\"\r\n\t,lazyBeforeStart:1 //开启延迟加载\uff0c在Start调用前任何时间进行加载都行\r\n\t,check:function(){return !Recorder.WaveView}\r\n});\r\npaths.push({\r\n\turl:PageSet_RecordAppBaseFolder+\"extensions/lib.fft.js\"\r\n\t,lazyBeforeStart:1\r\n\t,check:function(){return !Recorder.LibFFT}\r\n});\r\npaths.push({\r\n\turl:PageSet_RecordAppBaseFolder+\"extensions/frequency.histogram.view.js\"\r\n\t,lazyBeforeStart:1\r\n\t,check:function(){return !Recorder.FrequencyHistogramView}\r\n});\r\n\r\nRecordApp.AlwaysUseWeixinJS=!!(+localStorage[\"RecordApp_AlwaysUseWeixinJS\"]||0);\r\nRecordApp.AlwaysAppUseJS=!!(+localStorage[\"RecordApp_AlwaysAppUseJS\"]||0);\r\n\r\n//立即加载环境\uff0c自动把Recorder加载进来\r\nRecordApp.Install(function(){\r\n\tconsole.log(\"RecordApp.Install成功\");\r\n},function(){\r\n\tvar msg=\"RecordApp.Install出错\uff1a\"+err;\r\n\tconsole.log(msg);\r\n\talert(msg);\r\n});\r\n\r\n})();\r\n\u003c/script\u003e\r\n\r\n\r\n\u003c!-- \u30102\u3011构建界面 --\u003e\r\n\u003cdiv class=\"main\"\u003e\r\n\t\u003cdiv class=\"mainBox\"\u003e\r\n\t\t\u003cspan style=\"font-size:32px;color:#f60;\"\u003eRecordApp QuickStart: 快速入门\u003c/span\u003e\r\n\t\t\u003ca href=\"https://github.com/xiangyuecn/Recorder\"\u003eGitHub \u003e\u003e\u003c/a\u003e\r\n\t\t\r\n\t\t\u003cdiv style=\"padding-top:10px;color:#666\"\u003e\r\n\t\t\t更多Demo\uff1a\r\n\t\t\t\u003ca class=\"lb\" href=\"https://xiangyuecn.gitee.io/recorder/\"\u003eRecorder H5\u003c/a\u003e\r\n\t\t\t\u003ca class=\"lb\" href=\"https://jiebian.life/web/h5/github/recordapp.aspx\"\u003eRecordApp\u003c/a\u003e\r\n\t\t\t\u003ca class=\"lb\" href=\"https://xiangyuecn.gitee.io/recorder/QuickStart.html\"\u003eRecorder QuickStart\u003c/a\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\t\r\n\t\u003cdiv class=\"mainBox\"\u003e\r\n\t\t\u003c!-- 按钮控制区域 --\u003e\r\n\t\t\u003cdiv class=\"pd btns\"\u003e\r\n\t\t\t\u003cbutton onclick=\"recReq()\"\u003e请求权限\u003c/button\u003e\r\n\t\t\t\u003cbutton onclick=\"recStart()\"\u003e录制\u003c/button\u003e\r\n\t\t\t\u003cbutton onclick=\"recStop()\" style=\"margin-right:80px\"\u003e停止\u003c/button\u003e\r\n\t\t\t\r\n\t\t\t\u003cspan style=\"display: inline-block;\"\u003e\r\n\t\t\t\t\u003cbutton onclick=\"recPlay()\"\u003e播放\u003c/button\u003e\r\n\t\t\t\t\u003cbutton onclick=\"recUpload()\"\u003e上传\u003c/button\u003e\r\n\t\t\t\u003c/span\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\r\n\t\t\u003c!-- 波形绘制区域 --\u003e\r\n\t\t\u003cdiv class=\"pd recpower\"\u003e\r\n\t\t\t\u003cdiv style=\"height:40px;width:300px;background:#999;position:relative;\"\u003e\r\n\t\t\t\t\u003cdiv class=\"recpowerx\" style=\"height:40px;background:#0B1;position:absolute;\"\u003e\u003c/div\u003e\r\n\t\t\t\t\u003cdiv class=\"recpowert\" style=\"padding-left:50px; line-height:40px; position: relative;\"\u003e\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003cdiv class=\"pd waveBox\"\u003e\r\n\t\t\t\u003cdiv style=\"border:1px solid #ccc;display:inline-block\"\u003e\u003cdiv style=\"height:100px;width:300px;\" class=\"recwave\"\u003e\u003c/div\u003e\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\r\n\t\t\u003c!-- 功能配置区域 --\u003e\r\n\t\t\u003cdiv\u003e\r\n\t\t\t\u003cdiv class=\"pd\"\u003e\r\n\t\t\t\t\u003cspan class=\"lb\"\u003eJsSDK :\u003c/span\u003e \u003clabel\u003e\u003cinput type=\"checkbox\" class=\"alwaysUseWeixinJS\"\u003eAndroid微信内也用JsSDK\u003c/label\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\t\u003cdiv\u003e\r\n\t\t\t\t\u003cspan class=\"lb\"\u003eAppUseJS :\u003c/span\u003e \u003clabel\u003e\u003cinput type=\"checkbox\" class=\"alwaysAppUseJS\"\u003eApp里面总是使用Recorder H5录音\u003c/label\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\t\r\n\t\u003c!-- 日志输出区域 --\u003e\r\n\t\u003cdiv class=\"mainBox\"\u003e\r\n\t\t\u003cdiv class=\"reclog\"\u003e\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\u003c!-- \u30103\u3011实现录音逻辑 --\u003e\r\n\u003cscript\u003e\r\nvar rec,wave,recBlob;\r\n/**调用RequestPermission打开录音请求好录音权限**/\r\nvar recReq=function(){//一般在显示出录音按钮或相关的录音界面时进行此方法调用\uff0c后面用户点击开始录音时就能畅通无阻了\r\n\trec=false;\r\n\treclog(\"正在打开录音\uff0c请稍后...\");\r\n\t\r\n\tcreateDelayDialog(); //我们可以选择性的弹一个对话框\uff1a为了防止移动端浏览器存在第三种情况\uff1a用户忽略\uff0c并且\uff08或者国产系统UC系\uff09浏览器没有任何回调\uff0c此处demo省略了弹窗的代码\r\n\tRecordApp.RequestPermission(function(){\r\n\t\trec=true;\r\n\t\tdialogCancel(); //如果开启了弹框\uff0c此处需要取消\r\n\t\t\r\n\t\treclog(\"已打开录音\uff0c可以点击录制开始录音了\",2);\r\n\t},function(err,isUserNotAllow){\r\n\t\tdialogCancel(); //如果开启了弹框\uff0c此处需要取消\r\n\t\treclog((isUserNotAllow?\"UserNotAllow\uff0c\":\"\")+\"打开录音失败\uff1a\"+err,1);\r\n\t});\r\n\t\r\n\twindow.waitDialogClick=function(){\r\n\t\tdialogCancel();\r\n\t\treclog(\"打开失败\uff1a权限请求被忽略\uff0c\u003cspan style=\u0027color:#f00\u0027\u003e用户主动点击的弹窗\u003c/span\u003e\",1);\r\n\t};\r\n};\r\n\r\n\r\n\r\n/**开始录音**/\r\nfunction recStart(){\r\n\tif(!rec|| !RecordApp.Current){\r\n\t\treclog(\"未请求权限\", 1);\r\n\t\treturn;\r\n\t};\r\n\t\r\n\tif(RecordApp.Current==RecordApp.Platforms.Weixin){\r\n\t\treclog(\"正在使用微信JsSDK\uff0c录音过程中不会有任何回调\uff0c不要惊慌\");\r\n\t}else if(RecordApp.Current==RecordApp.Platforms.Native){\r\n\t\treclog(\"正在使用Native录音\uff0c底层由App原生层提供支持\");\r\n\t}else{\r\n\t\treclog(\"正在使用H5录音\uff0c底层由Recorder直接提供支持\");\r\n\t};\r\n\t\r\n\tvar set={\r\n\t\ttype:\"mp3\"\r\n\t\t,bitRate:16\r\n\t\t,sampleRate:16000\r\n\t\t,onProcess:function(buffers,powerLevel,bufferDuration,bufferSampleRate,newBufferIdx,asyncEnd){\r\n\t\t\t//录音实时回调\uff0c大约1秒调用12次本回调\r\n\t\t\tdocument.querySelector(\".recpowerx\").style.width=powerLevel+\"%\";\r\n\t\t\tdocument.querySelector(\".recpowert\").innerText=bufferDuration+\" / \"+powerLevel;\r\n\t\t\t\r\n\t\t\t//可视化图形绘制\r\n\t\t\twave.input(buffers[buffers.length-1],powerLevel,bufferSampleRate);\r\n\t\t}\r\n\t};\r\n\t\r\n\twave=null;\r\n\trecBlob=null;\r\n\tRecordApp.Start(set,function(){\r\n\t\treclog(RecordApp.Current.Key+\"录制中:\"+set.type+\" \"+set.bitRate+\"kbps\",2);\r\n\t\t\r\n\t\t//此处创建这些音频可视化图形绘制浏览器支持妥妥的\r\n\t\twave=Recorder.FrequencyHistogramView({elem:\".recwave\"});\r\n\t},function(err){\r\n\t\treclog(RecordApp.Current.Key+\"开始录音失败\uff1a\"+err,1);\r\n\t});\r\n};\r\n\r\n/**结束录音\uff0c得到音频文件**/\r\nfunction recStop(){\r\n\tif(!rec|| !RecordApp.Current){\r\n\t\treclog(\"未请求权限\",1);\r\n\t\treturn;\r\n\t};\r\n\t\r\n\tRecordApp.Stop(function(blob,duration){\r\n\t\tconsole.log(blob,(window.URL||webkitURL).createObjectURL(blob),\"时长:\"+duration+\"ms\");\r\n\t\t\r\n\t\trecBlob=blob;\r\n\t\treclog(\"已录制mp3\uff1a\"+duration+\"ms \"+blob.size+\"字节\uff0c可以点击播放\u3001上传了\",2);\r\n\t},function(msg){\r\n\t\treclog(\"录音失败:\"+msg,1);\r\n\t});\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**播放**/\r\nfunction recPlay(){\r\n\tif(!recBlob){\r\n\t\treclog(\"请先录音\uff0c然后停止后再播放\",1);\r\n\t\treturn;\r\n\t};\r\n\tvar cls=(\"a\"+Math.random()).replace(\".\",\"\");\r\n\treclog(\u0027播放中: \u003cspan class=\"\u0027+cls+\u0027\"\u003e\u003c/span\u003e\u0027);\r\n\tvar audio=document.createElement(\"audio\");\r\n\taudio.controls=true;\r\n\tdocument.querySelector(\".\"+cls).appendChild(audio);\r\n\t//简单利用URL生成播放地址\uff0c注意不用了时需要revokeObjectURL\uff0c否则霸占内存\r\n\taudio.src=(window.URL||webkitURL).createObjectURL(recBlob);\r\n\taudio.play();\r\n\t\r\n\tsetTimeout(function(){\r\n\t\t(window.URL||webkitURL).revokeObjectURL(audio.src);\r\n\t},5000);\r\n};\r\n\r\n/**上传**/\r\nfunction recUpload(){\r\n\tvar blob=recBlob;\r\n\tif(!blob){\r\n\t\treclog(\"请先录音\uff0c然后停止后再上传\",1);\r\n\t\treturn;\r\n\t};\r\n\t\r\n\t//本例子假设使用原始XMLHttpRequest请求方式\uff0c实际使用中自行调整为自己的请求方式\r\n\t//录音结束时拿到了blob文件对象\uff0c可以用FileReader读取出内容\uff0c或者用FormData上传\r\n\tvar api=\"https://xx.xx/test_request\";\r\n\tvar onreadystatechange=function(title){\r\n\t\treturn function(){\r\n\t\t\tif(xhr.readyState==4){\r\n\t\t\t\tif(xhr.status==200){\r\n\t\t\t\t\treclog(title+\"上传成功\",2);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treclog(title+\"没有完成上传\uff0c演示上传地址无需关注上传结果\uff0c只要浏览器控制台内Network面板内看到的请求数据结构是预期的就ok了\u3002\", \"#d8c1a0\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.error(title+\"上传失败\",xhr.status,xhr.responseText);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\treclog(\"开始上传到\"+api+\"\uff0c请求稍后...\");\r\n\r\n\t/***方式一\uff1a将blob文件转成base64纯文本编码\uff0c使用普通application/x-www-form-urlencoded表单上传***/\r\n\tvar reader=new FileReader();\r\n\treader.onloadend=function(){\r\n\t\tvar postData=\"\";\r\n\t\tpostData+=\"mime=\"+encodeURIComponent(blob.type);//告诉后端\uff0c这个录音是什么格式的\uff0c可能前后端都固定的mp3可以不用写\r\n\t\tpostData+=\"\u0026upfile_b64=\"+encodeURIComponent((/.+;\\s*base64\\s*,\\s*(.+)$/i.exec(reader.result)||[])[1]) //录音文件内容\uff0c后端进行base64解码成二进制\r\n\t\t//...其他表单参数\r\n\t\t\r\n\t\tvar xhr=new XMLHttpRequest();\r\n\t\txhr.open(\"POST\", api);\r\n\t\txhr.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\r\n\t\txhr.onreadystatechange=onreadystatechange(\"上传方式一\u3010Base64\u3011\");\r\n\t\txhr.send(postData);\r\n\t};\r\n\treader.readAsDataURL(blob);\r\n\r\n\t/***方式二\uff1a使用FormData用multipart/form-data表单上传文件***/\r\n\tvar form=new FormData();\r\n\tform.append(\"upfile\",blob,\"recorder.mp3\"); //和普通form表单并无二致\uff0c后端接收到upfile参数的文件\uff0c文件名为recorder.mp3\r\n\t//...其他表单参数\r\n\t\r\n\tvar xhr=new XMLHttpRequest();\r\n\txhr.open(\"POST\", api);\r\n\txhr.onreadystatechange=onreadystatechange(\"上传方式二\u3010FormData\u3011\");\r\n\txhr.send(form);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//recReq我们可以选择性的弹一个对话框\uff1a为了防止移动端浏览器存在第三种情况\uff1a用户忽略\uff0c并且\uff08或者国产系统UC系\uff09浏览器没有任何回调\r\nvar showDialog=function(){\r\n\tif(!/mobile/i.test(navigator.userAgent)){\r\n\t\treturn;//只在移动端开启没有权限请求的检测\r\n\t};\r\n\tdialogCancel();\r\n\t\r\n\t//显示弹框\uff0c应该使用自己的弹框方式\r\n\tvar div=document.createElement(\"div\");\r\n\tdocument.body.appendChild(div);\r\n\tdiv.innerHTML=(\u0027\u0027\r\n\t\t+\u0027\u003cdiv class=\"waitDialog\" style=\"z-index:99999;width:100%;height:100%;top:0;left:0;position:fixed;background:rgba(0,0,0,0.3);\"\u003e\u0027\r\n\t\t\t+\u0027\u003cdiv style=\"display:flex;height:100%;align-items:center;\"\u003e\u0027\r\n\t\t\t\t+\u0027\u003cdiv style=\"flex:1;\"\u003e\u003c/div\u003e\u0027\r\n\t\t\t\t+\u0027\u003cdiv style=\"width:240px;background:#fff;padding:15px 20px;border-radius: 10px;\"\u003e\u0027\r\n\t\t\t\t\t+\u0027\u003cdiv style=\"padding-bottom:10px;\"\u003e录音功能需要麦克风权限\uff0c请允许\uff1b如果未看到任何请求\uff0c请点击忽略~\u003c/div\u003e\u0027\r\n\t\t\t\t\t+\u0027\u003cdiv style=\"text-align:center;\"\u003e\u003ca onclick=\"waitDialogClick()\" style=\"color:#0B1\"\u003e忽略\u003c/a\u003e\u003c/div\u003e\u0027\r\n\t\t\t\t+\u0027\u003c/div\u003e\u0027\r\n\t\t\t\t+\u0027\u003cdiv style=\"flex:1;\"\u003e\u003c/div\u003e\u0027\r\n\t\t\t+\u0027\u003c/div\u003e\u0027\r\n\t\t+\u0027\u003c/div\u003e\u0027);\r\n};\r\nvar createDelayDialog=function(){\r\n\tdialogInt=setTimeout(function(){//定时8秒后打开弹窗\uff0c用于监测浏览器没有发起权限请求的情况\uff0c在open前放置定时器利于收到了回调能及时取消\uff08不管open是同步还是异步回调的\uff09\r\n\t\tshowDialog();\r\n\t},8000);\r\n};\r\nvar dialogInt;\r\nvar dialogCancel=function(){\r\n\tclearTimeout(dialogInt);\r\n\t\r\n\t//关闭弹框\uff0c应该使用自己的弹框方式\r\n\tvar elems=document.querySelectorAll(\".waitDialog\");\r\n\tfor(var i=0;i\u003celems.length;i++){\r\n\t\telems[i].parentNode.removeChild(elems[i]);\r\n\t};\r\n};\r\n//recReq弹框End\r\n\u003c/script\u003e\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\u003c!--以下这坨可以忽略--\u003e\r\n\u003cscript\u003e\r\n(function(){\r\nvar alwaysUseWeixinJS=document.querySelector(\".alwaysUseWeixinJS\");\r\nvar alwaysAppUseJS=document.querySelector(\".alwaysAppUseJS\");\r\n\r\nalwaysUseWeixinJS.checked=RecordApp.AlwaysUseWeixinJS;\r\nalwaysAppUseJS.checked=RecordApp.AlwaysAppUseJS;\r\n\r\nvar clickFn=function(key){\r\n\treturn function(e){\r\n\t\tlocalStorage[key]=e.target.checked?1:0;\r\n\t\tlocation.reload();\r\n\t};\r\n};\r\nalwaysUseWeixinJS.addEventListener(\"click\",clickFn(\"RecordApp_AlwaysUseWeixinJS\"));\r\nalwaysAppUseJS.addEventListener(\"click\",clickFn(\"RecordApp_AlwaysAppUseJS\"));\r\n})();\r\n\u003c/script\u003e\r\n\u003cscript\u003e\r\nfunction reclog(s,color){\r\n\tvar now=new Date();\r\n\tvar t=(\"0\"+now.getHours()).substr(-2)\r\n\t\t+\":\"+(\"0\"+now.getMinutes()).substr(-2)\r\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2);\r\n\tvar div=document.createElement(\"div\");\r\n\tvar elem=document.querySelector(\".reclog\");\r\n\telem.insertBefore(div,elem.firstChild);\r\n\tdiv.innerHTML=\u0027\u003cdiv style=\"color:\u0027+(!color?\"\":color==1?\"red\":color==2?\"#0b1\":color)+\u0027\"\u003e[\u0027+t+\u0027]\u0027+s+\u0027\u003c/div\u003e\u0027;\r\n};\r\nwindow.onerror=function(message, url, lineNo, columnNo, error){\r\n\t//https://www.cnblogs.com/xianyulaodi/p/6201829.html\r\n\treclog(\u0027\u003cspan style=\"color:red\"\u003e\u3010Uncaught Error\u3011\u0027+message+\u0027\u003cpre\u003e\u0027+\"at:\"+lineNo+\":\"+columnNo+\" url:\"+url+\"\\n\"+(error\u0026\u0026error.stack||\"不能获得错误堆栈\")+\u0027\u003c/pre\u003e\u003c/span\u003e\u0027);\r\n};\r\n\r\nreclog(\"RecordApp[即将废弃] 除Recorder支持的外\uff0c支持Hybrid App\uff0c低版本IOS上支持微信网页和小程序web-view\"+unescape(\"%uD83C%uDF89\"),\"#f60;font-weight:bold;font-size:24px\");\r\nreclog(\"Recorder H5使用简单\uff0c功能丰富\uff0c支持PC\u3001Android\u3001IOS 14.3+\"+unescape(\"%uD83D%uDCAA\"),\"#0b1;font-weight:bold;font-size:24px\");\r\nreclog(Tips);\r\n\u003c/script\u003e\r\n\r\n\u003cscript\u003e\r\nif(/mobile/i.test(navigator.userAgent)){\r\n\t//移动端加载控制台组件\r\n\tvar elem=document.createElement(\"script\");\r\n\telem.setAttribute(\"type\",\"text/javascript\");\r\n\telem.setAttribute(\"src\",\"https://cdn.bootcss.com/eruda/1.5.4/eruda.min.js\");\r\n\tdocument.body.appendChild(elem);\r\n\telem.onload=function(){\r\n\t\teruda.init();\r\n\t};\r\n};\r\n\u003c/script\u003e\r\n\r\n\u003c!-- 加载打赏挂件 --\u003e\r\n\u003cscript src=\"https://cdn.jsdelivr.net/gh/xiangyuecn/Recorder@latest/assets/zdemo.widget.donate.js\"\u003e\u003c/script\u003e\r\n\u003cscript\u003e\r\nvar donateView=document.createElement(\"div\");\r\ndocument.querySelector(\".reclog\").appendChild(donateView);\r\nDonateWidget({\r\n\tlog:function(msg){reclog(msg)}\r\n\t,mobElem:donateView\r\n});\r\n\u003c/script\u003e\r\n\r\n\u003cstyle\u003e\r\nbody{\r\n\tword-wrap: break-word;\r\n\tbackground:#f5f5f5 center top no-repeat;\r\n\tbackground-size: auto 680px;\r\n}\r\npre{\r\n\twhite-space:pre-wrap;\r\n}\r\na{\r\n\ttext-decoration: none;\r\n\tcolor:#06c;\r\n}\r\na:hover{\r\n\tcolor:#f00;\r\n}\r\n\r\n.main{\r\n\tmax-width:700px;\r\n\tmargin:0 auto;\r\n\tpadding-bottom:80px\r\n}\r\n\r\n.mainBox{\r\n\tmargin-top:12px;\r\n\tpadding: 12px;\r\n\tborder-radius: 6px;\r\n\tbackground: #fff;\r\n\t--border: 1px solid #f60;\r\n\tbox-shadow: 2px 2px 3px #aaa;\r\n}\r\n\r\n\r\n.btns button{\r\n\tdisplay: inline-block;\r\n\tcursor: pointer;\r\n\tborder: none;\r\n\tborder-radius: 3px;\r\n\tbackground: #f60;\r\n\tcolor:#fff;\r\n\tpadding: 0 15px;\r\n\tmargin:3px 20px 3px 0;\r\n\tline-height: 36px;\r\n\theight: 36px;\r\n\toverflow: hidden;\r\n\tvertical-align: middle;\r\n}\r\n.btns button:active{\r\n\tbackground: #f00;\r\n}\r\n\r\n.pd{\r\n\tpadding:0 0 6px 0;\r\n}\r\n.lb{\r\n\tdisplay:inline-block;\r\n\tvertical-align: middle;\r\n\tbackground:#00940e;\r\n\tcolor:#fff;\r\n\tfont-size:14px;\r\n\tpadding:2px 8px;\r\n\tborder-radius: 99px;\r\n}\r\n\u003c/style\u003e\r\n\r\n\u003c/body\u003e\r\n\u003c/html\u003e"};
};

})();
</script>

</body>
</html>
